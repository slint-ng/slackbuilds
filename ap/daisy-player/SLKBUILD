# Packaged by Didier Spaier <didier~at~slint~dot~fr>

# Warning: compilation fails with standard option.
# Instead of using slkbuild directly execute the wrapper script
# package.sh

pkgname=$(pwd|sed "s,.*/,,")
pkgver=13.0
pkgrel=2slint
source=("${pkgname}-${pkgver}.tar.gz")
#url: https://github.com/book-readers/daisy-player
docs=("copying" "license" "readme" "compile")
options=("nosrcpack")

slackdesc=\
(
#|-----handy-ruler------------------------------------------------------|
"$pkgname (A parser to play Daisy CD's with Linux)"
"Daisy-player reads a DAISY-CD and plays its audio-files."
"Daisy-player also CAN PLAY Audio-cd's and tries to fetch info using"
"Author: Joss Lemmens"
)
build() {
  cd $SRC/$pkgname-$pkgver || return 1
# This seems unnecessary in Slint 15.0,  based on Slackware 15.0 as the
# man page is written despite error 1 when building 
while read patch; do
	patch -p1 --verbose < $startdir/patches/$patch  || exit 1
done < $startdir/patches/series
  ./configure \
  --prefix=/usr
  make
  make install DESTDIR=$PKG
  mkdir -p $PKG/usr/doc/${pkgname}-$pkgver
  cp doc/Changelog $PKG/usr/doc/${pkgname}-$pkgver
  cp $PKG/usr/share/doc/daisy-player/daisy-player.{description,html,txt} \
  $PKG/usr/doc/${pkgname}-$pkgver
  rm -r $PKG/usr/share/doc
}
