# Maintainer: Yuki Ibe <yibe at yibe.org>
# Contributor: Ken Swenson <flat@imo.uto.moe>
# Included in in Slint by Didier Spaier didieratslintdotfr
# Note: this script package only the executable /usr/bin/open-jtalk
# The heavy dictionaries needed only by the Japanases voice
# hts_voice_nitech_jp_atr503_m001 are packaged by the script in
# open-jtalk-mecab-naist-jdic - Didier
pkgname=open-jtalk
pkgver=1.11
pkgrel=1slint
slackdesc="$pkgname (A Japanese text-to-speech synthesis system)"
#arch=('i686' 'x86_64')
url="https://sourceforge.net/projects/open-jtalk/"
license=('BSD')
depends=('gcc-libs')
makedepends=('hts-engine')
source=("https://downloads.sourceforge.net/project/open-jtalk/Open%20JTalk/open_jtalk-$pkgver/open_jtalk-$pkgver.tar.gz"
"5_spelling_errors.patch"
"10_use_shared_lib.patch")
sha1sums=('de8f290664e3bfd7a071a0f6db9e949c4eedb306')
docs=("AUTHORS" "COPYING" "NEWS" "README")
options=("nosrcpack")
build() {
	cd "open_jtalk-$pkgver"
	# patches from Debian
	 patch -p1 --verbose < $SRC/5_spelling_errors.patch || exit 1
	 patch -p1 --verbose < $SRC/10_use_shared_lib.patch || exit 1
	autoreconf -vif
	./configure --prefix=/usr --with-hts-engine-header-path=/usr/include  \
	--with-hts-engine-library-path=/usr/lib64
	make
	make DESTDIR="$PKG" install
	rm -rf $PKG/usr/dic
}
