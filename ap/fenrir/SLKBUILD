# Maintainer: Storm Dragon <storm_dragon@linux-a11y.org>
# Contributor: Didier Spaier
pkgname='fenrir'
pkgver=2026.01.28
pkgrel=1slint
source=(https://git.stormux.org/storm/fenrir/archive/${pkgver}.tar.gz)
slackdesc=\
(
#|-----handy-ruler------------------------------------------------------|
"$pkgname (A user space console screen reader written in python3)"
"Developers: Storm Dragon, Chrys and contributors."
"Home page: https://git.stormux.org/storm/fenrir"
)


docs=("CREDITS" "LICENCE" "README.fenrir" "fenrir-user-guide.html" "fenrir-user-guide.pdf")
license=('LGPL')
depends=('gstreamer'
  'gst-plugins-base'
  'gst-plugins-good'
  'python'
  'python-daemonize'
  'python-dbus'
  'python-evdev'
  'python-gobject'
  'python-pexpect'
  'python-pyenchant'
  'python-pyperclip'
  'python-pyte'
  'python-pyudev'
  'python-pyxdg'
  'python-setproctitle'
  'speech-dispatcher')
optdepends=('socat: Control running Fenrir screenreader'
  'sox: sound driver'
  'xclip: for copy to X session clipboard')
makedepends=('python-setuptools')
doinst (){
	(cd /usr/sbin
	ln -sf /usr/share/fenrirscreenreader/tools/configure_fenrir.py ./configure-fenrir
	)
}

build() {
  srcdir="$SRC/${pkgname}-${pkgver}"
  [ -d "$srcdir" ] || srcdir="$SRC/${pkgver}"
  cd "$srcdir"
  python3 setup.py install --force-settings --root="$PKG" --optimize=1
  mkdir -p $PKG/etc/rc.d $PKG/usr/doc/${pkgname}-${pkgver}
  mkdir -p $PKG/usr/share/fenrirscreenreader/scripts
  chmod -R 755 $PKG/usr/share/fenrirscreenreader/scripts
  cp $startdir/README.fenrir $PKG/usr/doc/${pkgname}-${pkgver}
  cp $startdir/rc.fenrir $PKG/etc/rc.d/
#  cp $startdir/fenrir.conf $PKG/etc
  chmod 644 $PKG/etc/rc.d/rc.fenrir

}

# vim: set ts=2 sw=2 et:
