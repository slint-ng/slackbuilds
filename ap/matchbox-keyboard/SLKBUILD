# Maintainer: begin-theadventure <begin-thecontact.ncncb at dralias dot com>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>

pkgname=matchbox-keyboard
pkgver=0.1.1
pkgrel=1slint
slackdesc="$pkgname (An on screen virtual keyboard)"
arch=('x86_64')
depends=('cairo' 'libfakekey' 'libxft')
url="https://www.yoctoproject.org/software-item/matchbox"
license=('LGPL2.1')
source=("http://deb.debian.org/debian/pool/main/m/matchbox-keyboard/matchbox-keyboard_0.2+git20160713.orig.tar.xz")
sha256sums=('dd3e9494a9499a3bf3017c8c1e6572a4e91deb20e219717db17c0977750b8bcb')
docs=("AUTHORS" "COPYING" "README")
doinst() {
	if [ -x /usr/bin/update-desktop-database ]; then
		/usr/bin/update-desktop-database -q usr/share/applications >/dev/null 2>&1
	fi
}
# note: --enable-applet is ineffective because the package matchbox-panel
# does not ship a shared library - Didier
build() {
  cd $pkgname
	# Ptaches from Debian
	while read -r i; do
		patch -p1 --verbose < $startdir/patches/$i || exit
	done < $startdir/patches/series
  ./autogen.sh
  ./configure \
	 --libdir=/usr/lib64 \
	 --prefix=/usr \
	 --disable-static \
	 --enable-cairo \
	 --enable-examples \
	 --enable-gtk-im \
	 --enable-gtk-widget \
	 --enable-gtk3-im
  make
  mkdir -p $PKG/usr/man/man1
  cp $startdir/matchbox-keyboard.1 $PKG/usr/man/man1
  make DESTDIR="$PKG" install
}
