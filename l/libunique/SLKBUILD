#Packager: George Vlahavas <vlahavas~at~gmail~dot~com>

pkgname=libunique
pkgver=1.1.6
pkgrel=1slint
source=("http://ftp.gnome.org/pub/GNOME/sources/libunique/1.1/libunique-1.1.6.tar.bz2" "gdbus.patch" "remove_G_CONST_RETURN.patch" "noWerror.patch")
docs=("readme" "install" "copying" "changelog" "authors" "news" "todo")

slackdesc=\
(
#|-----handy-ruler------------------------------------------------------|
"libunique (a library for writing single instance applications)"
"Unique is a library for writing single instance application. If you"
"launch a single instance application twice, the second instance will"
"either just quit or will send a message to the running instance."
"Unique makes it easy to write this kind of applications, by providing"
"a base class, taking care of all the IPC machinery needed to send"
"messages to a running instance, and also handling the startup"
"notification side."
)


build() {
	cd $startdir/src/$pkgname-$pkgver

	#patch -p1 < $startdir/src/gdbus.patch || exit 1
	patch -p1 < $startdir/src/remove_G_CONST_RETURN.patch || exit 1
	patch -p1 < $startdir/src/noWerror.patch || exit 1

	./configure --prefix=/usr \
		--libdir=/usr/lib${LIBDIRSUFFIX} \
		--localstatedir=/var \
		--sysconfdir=/etc \
		--disable-dependency-tracking \
		--disable-maintainer-flags \
		--disable-dbus \
		--disable-static \
		--disable-debug \
		--disable-introspection \
		--disable-gtk-doc \
		--build=$arch-slackware-linux
	make || return 1
	make install DESTDIR=$startdir/pkg

	# we don't need this
	rm -rf $startdir/pkg/usr/share/gtk-doc
} 
