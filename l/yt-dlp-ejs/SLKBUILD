# Maintainer: Antonio Rojas <arojas@archlinux.org>

#Included in Slint by Didier Spaier didieratslintdotfr
pkgname=yt-dlp-ejs
pkgver=0.4.0
pkgrel=1slint
export commit=e91d03f
export srcname=ejs
slackdesc="$pkgname (External JavaScript for yt-dlp supporting many runtimes)"
url='https://github.com/yt-dlp/ejs'
license=(Unlicense)
depends=(deno
         python)
makedepends=(git
             python-build
             python-hatch-vcs
             python-hatchling
             python-installer)
checkdepends=(python-pytest)
#source=(https://github.com/yt-dlp/ejs/archive/refs/tags/${pkgver}.tar.gz)
sha256sums=('3c67e0e971812df363bb837d2f333091d6735092314fa01c4d6e5127b1ae00ef')
docs=("LICENSE" "README.md")
build() {
  git clone https://github.com/yt-dlp/ejs.git	
  cd $srcname
  git checkout $commit
  sed -i '/3\.14/d' pyproject.toml
  sed -i '/3\.13/d' pyproject.toml
  python3.11 -m build --wheel --no-isolation
  python3.11 -m installer --destdir="$PKG" dist/*.whl
}
