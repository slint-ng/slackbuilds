#!/bin/bash
#
# rc.4		This file is executed by init(8) when the system is being
#		initialized for run level 4 (XDM)
#
# Version:	@(#)/etc/rc.d/rc.4	2.00	02/17/93
#
# Author:	Fred N. van Kempen, <waltje@uwalt.nl.mugnet.org>
# At least 47% rewritten by:  Patrick J. Volkerding <volkerdi@slackware.com>
#
# Adapted by Didier Spaier to Slint <didier~at~slint~dot~fr>

# Tell the viewers what's going to happen...
echo "Starting up X11 session manager..."

# If you'd like to start something different or in a different order than
# the options below, create your own startup script /etc/rc.d/rc.4.local
# and make it executable and it will be used instead:
if [ -x /etc/rc.d/rc.4.local ]; then
  exec /bin/bash /etc/rc.d/rc.4.local
fi

# Use LightDM (A Lightweight Desktop Manager) if you need speech.
# We redirect the standard error so that a speech user does not hear
# annoying messages while in a graphical session.
if [ -x /usr/bin/lightdm ]; then
  if [ -f /var/log/lightdm/startlightdm.log ]; then
    mv /var/log/lightdm/startlightdm.log /var/log/lightdm/startlightdm.log.old
  fi
  exec /usr/bin/lightdm 2>/var/log/lightdm/startlightdm.log
fi


# Look for SDDM as well:
if [ -x /usr/bin/sddm ]; then
  exec /usr/bin/sddm
fi


if [ -x /usr/bin/gdm ]; then
  exec /usr/bin/gdm -nodaemon
fi

# Someone thought that gdm looked prettier in /usr/sbin,
# so look there, too:
if [ -x /usr/sbin/gdm ]; then
  exec /usr/sbin/gdm -nodaemon
fi

# error
echo
echo "Hey, you don't have LightDM, SDDM, or GDM.  Can't use runlevel 4 without"
echo "one of those installed."
sleep 30

# All done.
