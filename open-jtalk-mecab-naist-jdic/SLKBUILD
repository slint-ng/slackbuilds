# Maintainer: Yuki Ibe <yibe at yibe.org>
# Contributor: Ken Swenson <flat@imo.uto.moe>
# Included in in Slint by Didier Spaier didieratslintdotfr
# Note: the executable /usr/bin/openjtalk is packaged by the script
#  - Didier
pkgname=open-jtalk-mecab-naist-jdic
pkgver=1.11
pkgrel=1slint
slackdesc=("$pkgname (Japanese Dictionary converted for Mecab)"
"This dictionary from NAIST is used by Open Jtalk."
"It is this needed by voices like open-jtalk-voice-jp"
)
#arch=('i686' 'x86_64')
url="https://sourceforge.net/projects/open-jtalk/"
license=('BSD')
depends=('gcc-libs')
makedepends=('hts-engine')
source=("https://downloads.sourceforge.net/project/open-jtalk/Open%20JTalk/open_jtalk-$pkgver/open_jtalk-$pkgver.tar.gz"
"5_spelling_errors.patch"
"10_use_shared_lib.patch")
sha1sums=('de8f290664e3bfd7a071a0f6db9e949c4eedb306')
docs=("AUTHORS" "COPYING" "NEWS" "README")
options=("nosrcpack")
build() {
	cd "open_jtalk-$pkgver"
	# patches from Debian
	 patch -p1 --verbose < $SRC/5_spelling_errors.patch || exit 1
	 patch -p1 --verbose < $SRC/10_use_shared_lib.patch || exit 1
	autoreconf -vif
	./configure --prefix=/usr --with-hts-engine-header-path=/usr/include  \
	--with-hts-engine-library-path=/usr/lib64
	make
	make DESTDIR="$PKG" install
	mkdir -p $PKG/var/lib/mecab/dic/open-jtalk/naist-jdic
	cp $PKG/usr/dic/* $PKG/var/lib/mecab/dic/open-jtalk/naist-jdic
	rm -r $PKG/usr/dic
	rm -r $PKG/usr/bin
}
