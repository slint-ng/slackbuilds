# Maintainer: Yuki Ibe <yibe at yibe.org>
# Contributor: Ken Swenson <flat@imo.uto.moe>
# included in Slint by Didier Spaier didieratslintdotfr
pkgname=hts_engine_API
pkgver=1.10
pkgrel=1slint
slackdesc="$pkgname (The HMM-Based Speech Synthesis Engine "
#arch=('i686' 'x86_64')
url="https://sourceforge.net/projects/open-jtalk/"
license=('BSD')
depends=('gcc-libs')
makedepends=('hts-engine')
source=("https://sourceforge.net/projects/hts-engine/files/hts_engine%20API/hts_engine_API-1.10/hts_engine_API-1.10.tar.gz"
"https://sourceforge.net/projects/hts-engine/files/hts_engine%20API/hts_engine_API-1.10/hts_engine_API_readme-1.10.txt"
"https://sourceforge.net/projects/hts-engine/files/hts_engine%20API/hts_engine_API-1.10/hts_engine_API_reference-1.10.pdf"
"10_build_shared_lib.patch")
options=("nosrcpack")
docs=("hts_engine_API_readme-1.10.txt" "hts_engine_API_reference-1.10.pdf" "AUTHORS" "COPYING")
doinst() {
	# Update all the shared library links:
	if [ -x /sbin/ldconfig ]; then
	/sbin/ldconfig &
	fi
}

build() {
	cd "${pkgname}-$pkgver"
	# patch from Debian
	patch -p1 --verbose < $SRC/10_build_shared_lib.patch || exit 1
	autoreconf -vif
	./configure \
	--prefix=/usr \
	--libdir=/usr/lib${LIBDIRSUFFIX}
	make
	make DESTDIR="$PKG" install
}
