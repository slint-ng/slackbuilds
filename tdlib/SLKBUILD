# Maintainer: j.r <j.r@jugendhacker.de>
# Contributor: Felix Serrano Blanco <felixseblanc@gmail.com>
# Included in Sint by Didier Spaier didieratslintdotfr

pkgname=tdlib
pkgver=git461b740
pkgrel=1slint
slackdesc="tdlib (Cross-platform library for building Telegram clients)"
arch=('x86_64')
url='https://core.telegram.org/tdlib'
license=('Boost')
depends=(
	'openssl'
	'zlib'
	'gcc-libs'
)
makedepends=(
	'git'
	'clang>=3.4'
	'cmake>=3.0.2'
	'gperf'
	'php'
)
provides=('libtd')
conflicts=('telegram-tdlib')
#source=("https://github.com/tdlib/td/archive/refs/tags/v${pkgver}.tar.gz")
docs=("README.md" "CHANGELOG.md" "LICENSE_1_0.txt")
build() {
	git clone https://github.com/tdlib/td.git
	cd td
	mkdir build
	cd build
	CXXFLAGS="-stdlib=libc++" \
	CC=/usr/bin/clang \
	CXX=/usr/bin/clang++ \
	cmake \
	-DCMAKE_BUILD_TYPE=Release \
	-DCMAKE_INSTALL_PREFIX:PATH=$PKG/usr \
	..
	cmake --build . --target install
}
