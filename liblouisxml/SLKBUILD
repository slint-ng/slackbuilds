#Maintainer: Didier Spaier <didier~at~slint~dot~fr>

pkgname=liblouisxml
pkgver=git5ebf06c
pkgrel=1slint
arch=x86_64
source=("${pkgname}-${pkgver}.tar.xz" "liblouisxml_2.4.0-12.debian.tar.xz")
options=("nosrcpack"
)
docs=("AUTHORS" "COPYING*" "README" "NEWS" "copyright-notice")
url=https://salsa.debian.org/a11y-team/liblouisxml

slackdesc=\
(
#|-----handy-ruler------------------------------------------------------|
"$pkgname (braille transcription services for xml documents)"
"Liblouisxml is an open-source library providing complete braille"
"transcription services for xml documents. It translates into"
"appropriate braille codes and formats according to its style sheet and"
"the specifications in the document. A command-line program, xml2brl"
"which uses this library is also included. The latest version of"
"liblouis is required."
)


build() {
	cd ${pkgname}-$pkgver
	while read patch; do
		echo $patch
		read
		patch -p1 --verbose < $SRC/debian/patches/$patch || exit 1
	done < $SRC/debian/patches/series
	autoreconf -vif
	./configure \
	--prefix=/usr \
	--docdir=/usr/doc/${pkgname}-$pkgver \
	--libdir=/usr/lib64 
	make
	make install DESTDIR=$PKG
	# configure doesnt seem to honor docdir
	mkdir $PKG/usr/doc
	mv $PKG/usr/share/doc/liblouisxml $PKG/usr/doc/${pkgname}-$pkgver
	rmdir $PKG/usr/share/doc
	rm -f $PKG/usr/lib*/*.la
}
