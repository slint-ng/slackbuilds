# Maintainer: Luis Martinez <luis dot martinez at disroot dot org>
# Contributor: Karol Babioch <karol@babioch.de>

#Included in Slint by Didier Spaier didieratslintdotfr

pkgname=aaxtomp3
commit=e6651d
pkgver=git$commit
pkgrel=1slint
slackdesc="$pkgname (Convert Audible's .aax filetype to MP3, FLAC, M4A, or OPUS)"
arch=('noarch')
url='https://github.com/KrumpetPirate/AAXtoMP3'
license=('custom:WTFPL')
docs=(LICENSE README.html)
depends=('bash' 'ffmpeg' 'lame')
optdepends=(
	'jq: only if --use-audible-cli-data is set or converting an .aaxc file'
	'mediainfo: adds additional media tags')
#source=("$pkgname-$pkgver.tar.gz::$url/archive/v$pkgver.tar.gz")
sha256sums=('7165c405660cf20b36d50ecad76c669d9daae16b5391755d3338a029b0346eb8')
options=(nosrcpack)
build() {
	git clone https://github.com/KrumpetPirate/AAXtoMP3.git
	cd "AAXtoMP3"
	git checkout $commit
	pandoc -f gfm -t html5 README.md -o README.html
	git checkout $commit
	install -Dv AAXtoMP3 interactiveAAXtoMP3 -t "$PKG/usr/bin/"
	install -Dvm644 _config.yml -t "$PKG/usr/share/$pkgname/"
}
