# Maintainer: Didier Spaier didieratslintdotfr
pkgname=eukleides
pkgver=1.5.4
pkgrel=3slint
epoch=
slackdesc="Eukleides (computer language devoted to elementary plane geometry.)"
arch=(x86_64)
url="http://eukleides.org/"
license=('GPL')
options=(nosrcpack)
source=("http://eukleides.org/files/$pkgname-$pkgver.tar.bz2" "eukleides_1.5.4-5.debian.tar.xz")
build() {
	# patches from Debian, extracted from the archive eukleides_1.5.4-5.debian.tar.xz
	cd "$pkgname-$pkgver"
	while read patch; do
		patch -p1 --verbose -i  "$SRC/debian/patches/$patch" || exit 1
	done <  "$SRC/debian/patches/series"
#	patch -p1 --verbose < $SRC/install_the_docs.diff || exit 1
	make all
	mkdir -p $PKG/usr/bin $PKG/usr/doc
	make install DESTDIR=$PKG
	mv $PKG/usr/share/doc/eukleides $PKG/usr/doc/eukleides-$pkgver || exit 1
	mv $PKG/usr/share/texmf $PKG/usr/share/texmf-dist || exit 1
	mv $PKG/usr/share/man $PKG/usr/man || exit 1
	rmdir $PKG/usr/share/doc
	cp -r doc/* $PKG/usr/doc/eukleides-$pkgver || exit 1
	rm $PKG/usr/doc/eukleides-$pkgver/Makefile* || exit 1
	mkdir -p $PKG/usr/info
	mv $PKG/usr/doc/eukleides-1.5.4/eukleides.info $PKG/usr/info
}
